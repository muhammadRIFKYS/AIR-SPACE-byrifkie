<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Air Space</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: black;
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
}

canvas {
  background: #050014;
  display: block;
  margin: 10px auto;
  border: 2px solid #c4c8ce;
}

.info {
  font-size: 16px;
}

/* MENU */
.menu {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle, #140320, black);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  z-index: 10;
}

.menu button {
  padding: 12px 25px;
  font-size: 18px;
  margin-top: 15px;
  border-radius: 8px;
  cursor: pointer;
}

/* MOBILE CONTROL */
.controls {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 10px;
}

.controls button {
  width: 60px;
  height: 60px;
  font-size: 22px;
  border-radius: 50%;
}
</style>
</head>

<body>

<div id="menu" class="menu">
  <h1>ðŸš€ AIR SPACE</h1>
  <p>High Score: <span id="highScore">0</span></p>
  <button onclick="startGame()">Mulai Game</button>
</div>

<div class="info">
  Skor: <span id="score">0</span> |
  Nyawa: <span id="life">3</span>
</div>

<div class="controls">
  <button ontouchstart="keys.left=true" ontouchend="keys.left=false">â¬…</button>
  <button ontouchstart="shoot()">ðŸ”¥</button>
  <button ontouchstart="keys.right=true" ontouchend="keys.right=false">âž¡</button>
</div>

<canvas id="game" width="400" height="600"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let keys = { left:false, right:false };
let bullets = [];
let enemies = [];
let stars = [];
let score = 0;
let life = 3;
let gameOver = false;
let boss = null;
let highScore = localStorage.getItem("airspace") || 0;

document.getElementById("highScore").textContent = highScore;

const sfxShoot = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-laser-weapon-shot-1681.mp3");
const sfxBoom = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-arcade-game-explosion-2759.mp3");

const player = { x:200, y:520, speed:6 };

// STARS
for(let i=0;i<100;i++){
  stars.push({x:Math.random()*400,y:Math.random()*600,s:1+Math.random()*2});
}

document.addEventListener("keydown", e=>{
  if(e.code==="ArrowLeft") keys.left=true;
  if(e.code==="ArrowRight") keys.right=true;
  if(e.code==="Space") shoot();
});
document.addEventListener("keyup", e=>{
  if(e.code==="ArrowLeft") keys.left=false;
  if(e.code==="ArrowRight") keys.right=false;
});

function shoot(){
  if(bullets.length<6){
    bullets.push({x:player.x,y:player.y});
    sfxShoot.currentTime=0; sfxShoot.play();
  }
}

function spawnEnemy(){
  enemies.push({x:Math.random()*370,y:-40,size:30,speed:2});
}

function spawnBoss(){
  boss = {x:100,y:40,w:200,h:40,hp:50};
}

function startGame(){
  document.getElementById("menu").style.display="none";
  bullets=[]; enemies=[];
  score=0; life=3; boss=null;
  gameOver=false;
  update();
}

function drawStars(){
  ctx.fillStyle="white";
  stars.forEach(s=>{
    s.y+=s.s;
    if(s.y>600) s.y=0;
    ctx.fillRect(s.x,s.y,2,2);
  });
}

function update(){
  if(gameOver) return;
  ctx.clearRect(0,0,400,600);
  drawStars();

  if(keys.left) player.x-=player.speed;
  if(keys.right) player.x+=player.speed;
  player.x=Math.max(15,Math.min(385,player.x));

  // Player
  ctx.fillStyle="cyan";
  ctx.beginPath();
  ctx.moveTo(player.x,player.y);
  ctx.lineTo(player.x-15,player.y+40);
  ctx.lineTo(player.x+15,player.y+40);
  ctx.fill();

  // Bullets
  ctx.fillStyle="yellow";
  bullets.forEach((b,i)=>{
    b.y-=8;
    ctx.fillRect(b.x-2,b.y,4,10);
    if(b.y<0) bullets.splice(i,1);
  });

  // Enemy
  ctx.fillStyle="red";
  enemies.forEach((e,i)=>{
    e.y+=e.speed;
    ctx.fillRect(e.x,e.y,e.size,e.size);
    bullets.forEach((b,bi)=>{
      if(b.x>e.x&&b.x<e.x+30&&b.y>e.y){
        enemies.splice(i,1);
        bullets.splice(bi,1);
        score+=10;
        sfxBoom.play();
      }
    });
    if(e.y>600) enemies.splice(i,1);
  });

  // Boss
  if(score>=200 && !boss) spawnBoss();
  if(boss){
    ctx.fillStyle="purple";
    ctx.fillRect(boss.x,boss.y,boss.w,boss.h);
    bullets.forEach((b,bi)=>{
      if(b.x>boss.x&&b.x<boss.x+boss.w&&b.y>boss.y){
        boss.hp--; bullets.splice(bi,1);
        if(boss.hp<=0){
          score+=200; boss=null;
        }
      }
    });
  }

  if(Math.random()<0.03) spawnEnemy();

  document.getElementById("score").textContent=score;
  document.getElementById("life").textContent=life;

  if(score>highScore){
    highScore=score;
    localStorage.setItem("airspace",highScore);
  }

  requestAnimationFrame(update);
}
</script>

</body>
</html>
